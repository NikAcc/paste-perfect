import{a as b,b as y}from"./chunk-7T2SKOFI.js";import{_ as g}from"./chunk-CXCMY4KK.js";import{a as h}from"./chunk-XOT5ACJC.js";import{e as f,f as N,g as A,h as l,k as R,l as P}from"./chunk-L6NEJVET.js";import{Eb as T,I as L,O as S}from"./chunk-FNVWSYXI.js";import{f as C,g as u}from"./chunk-2R6CW7ES.js";var c=C(b());var n=class{static wrapAllTextNodesWithSpan(t){t.childNodes.forEach(e=>{if(this.isTextNode(e)&&!this.isInsideSpan(e)&&e.nodeValue?.trim()!==""){let i=document.createElement("span");i.textContent=e.nodeValue,t.replaceChild(i,e)}else this.isHtmlElement(e)&&this.wrapAllTextNodesWithSpan(e)})}static isHtmlElement(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}static isTextNode(t){return!!t&&t.nodeType===Node.TEXT_NODE}static isInsideSpan(t){let e=t.parentNode;for(;e;){if(e.nodeName.toLowerCase()==="span")return!0;e=e.parentNode}return!1}};var d=class{static rootStyleProperties={};static RELEVANT_STYLE_PROPERTIES={color:"rgba(0, 0, 0)","font-family":void 0,"font-size":void 0,"font-style":"normal","font-variant":"normal","font-weight":"400"};static applyMinimalInlineStyles(t,e,i=!1){i&&(this.rootStyleProperties={}),n.isHtmlElement(t)&&n.isHtmlElement(e)?this.applyElementStyles(t,e,i):n.isHtmlElement(e)&&!i&&this.applyStoredRootStyles(e),e.childNodes.forEach((r,s)=>{n.isHtmlElement(r)&&this.applyMinimalInlineStyles(t.childNodes[s],r)})}static applyElementStyles(t,e,i){e.removeAttribute("class");let r=window.getComputedStyle(t);l(this.RELEVANT_STYLE_PROPERTIES).forEach(([s,v])=>{let m=r.getPropertyValue(s);i&&(this.rootStyleProperties[s]=m),m&&m!==String(v)&&e.style.setProperty(s,m)})}static applyStoredRootStyles(t){l(this.rootStyleProperties).forEach(([e,i])=>{i&&i!==this.RELEVANT_STYLE_PROPERTIES[e]&&t.style.setProperty(e,i)})}};var a=class{static WHITESPACE_CHARS=[" ","\xA0"];static TAB_CHARS=["	"];static WHITESPACE_PATTERN=this.WHITESPACE_CHARS.join("");static TAB_PATTERN=this.TAB_CHARS.join("");static WHITESPACE_REGEX=new RegExp(`[${this.WHITESPACE_PATTERN}]`,"g");static TAB_REGEX=new RegExp("[	]","g");static MARKER_REGEX=new RegExp("","g");static INDENTATION_REGEX=new RegExp(`^[${this.WHITESPACE_PATTERN}${this.TAB_PATTERN}]+`,"gm");static NON_ASCII_CHARACTERS_REGEX=new RegExp(/[^\x20-\x7E\n]/g,"g");static BLANK_LINES_REGEX=new RegExp(/^\s*\n+|\n+\s*$/g,"g")};var p=class{static maskIndentation(t,e){let i=t?.querySelector(N);!t||!i||(i.innerHTML=i.innerHTML.replace(a.INDENTATION_REGEX,r=>r.replace(a.WHITESPACE_REGEX,"").replace(a.TAB_REGEX,"".repeat(e))))}static replaceMarkers(t,e,i){let r;if(e===A.Tabs){let s=new RegExp(`(){${i}}`,"g");t.innerHTML=t.innerHTML.replace(s,"	").replace(a.MARKER_REGEX," ")}else e===A.Spaces?r=" ":r="\xA0",t.innerHTML=t.innerHTML.replace(a.MARKER_REGEX,r)}};var E=class{static sanitizeInput(t){return l(R).forEach(([e,i])=>{t=t.replace(new RegExp(e,"g"),i)}),t.replace(a.NON_ASCII_CHARACTERS_REGEX,"").replace(a.BLANK_LINES_REGEX,"")}static sanitizeOutput(t){return l(P).forEach(([e,i])=>{t=t.replace(new RegExp(e,"g"),i)}),t}};var M=class o{settingsService=S(h);prismLanguageLoaderService=S(y);messageService=S(g);mode=T(()=>this.settingsService.editorSettings.indentationMode);tabSize=T(()=>this.settingsService.editorSettings.indentationSize);highlightCode(t,e){return u(this,null,function*(){let i=E.sanitizeInput(t);return c.languages[e.value]||(yield this.prismLanguageLoaderService.loadPrismLanguage(e)),c.highlight(i,c.languages[e.value],e.value)})}copyToClipboard(){let t=document.querySelector(f);if(!t){this.messageService.add({severity:"warn",summary:"No code available",detail:"Please enter some code before copying."});return}let e=t.cloneNode(!0);p.maskIndentation(e,this.tabSize()),n.wrapAllTextNodesWithSpan(e),d.applyMinimalInlineStyles(t,e,!0),p.replaceMarkers(e,this.mode(),this.tabSize());let i=E.sanitizeOutput(e.outerHTML),r=e.outerText;navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([i],{type:"text/html"}),"text/plain":new Blob([r],{type:"text/plain"})})]).then(()=>{this.messageService.add({severity:"success",summary:"Copied successfully",detail:"The code has been copied to your clipboard."})}).catch(s=>{this.messageService.add({severity:"error",summary:"Copy failed",detail:"An error occurred while copying the code. Please try again."}),console.error("Failed to copy:",s)})}static \u0275fac=function(e){return new(e||o)};static \u0275prov=L({token:o,factory:o.\u0275fac,providedIn:"root"})};export{M as a};
